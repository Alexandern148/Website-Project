<!DOCTYPE html>
<html>
    <head>
        <script>
        window.onload = function()
        {
            var username = getCookie('username');
            var span = document.getElementById('cookieSpan');
            span.innerHTML="Welcome " + username;
        }
            function setCookie(cname, cvalue, exdays){
                
                console.log("entering set cookie routine");
                var d = new Date();
                d.setTime(d.getTime() + (exdays*24*60*60*1000));
                var expires = "expires=" + d.toGMTString();
                document.cookie = cname + "=" + cvalue + "; " + expires;
            }
            function getCookie(cname)
            {
                
                console.log("loading get cookie....");
                
                var name = cname + "=";
                console.log(`document cookie list is ${document.cookie}`);
                var ca = document.cookie.split(";");
                console.log("displaing ca: " + ca);
                
                for(var i = 0; i < ca.length; i++){
                    var c = ca[i];
                    console.log(`c at i: ${ca[i]}`);
                    while(c.charAt(0)== ' ') c = c.substring(1);
                    if(c.indexOf(name) == 0){
                        return c.substring(name.length, c.length);
                    }
                }
                return"";
            
            }
            
            function checkCookie(){
                
                var username=getCookie("username");
                if(username != ""){
                    alert("welcome again, " + username);
                }
                else{
                    username=prompt("Please enter your name: ", "");
                    if(username != "" && username != null){
                        console.log("no cookie exists, with that name...");
                        setCookie("username", username, 30);//expiration period
                    }
                }
                
            }
            
            function newWebsite()
            {
                location.href = "Home.html";
            }
            
            </script>
    </head>
    <body onload="checkCookie()">
        <span id = "cookieSpan"></span>
        <button onclick = "newWebsite()"> Take me to my home page.</button>
    </body>
</html>